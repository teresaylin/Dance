<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='css/style.css' />
    <link rel='stylesheet' href='css/jquery-ui.min.css' />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src='js/jquery-ui.min.js'></script>
    <script>

    // var formationX = parseInt($("#right").offset().left, 10);
    // var formationY = parseInt($("#right").offset().top, 10);
    var formationX;
    var formationY;

    $(function() {
        formationX = parseInt($("#right").offset().left, 10);
        formationY = parseInt($("#right").offset().top, 10);
        $(".draggable-icon").draggable({
            revert: "invalid",
            scroll: false,
            stack: ".draggable-icon",
            helper: "clone",
            appendTo: "#main",
            start: function(event, ui) {
                // var dropped = ui.draggable.clone();
                // var dropped = ui.draggable;
                var mouseX = parseInt(event.pageX);
                var mouseY = parseInt(event.pageY);
                var currentX = parseInt($(dropped).offset().left, 10);
                var currentY = parseInt($(dropped).offset().top, 10);
                var deltaX = mouseX - currentX;
                var deltaY = mouseY - currentY;
                $(dropped).css({'top': '+=' + deltaY, 'left': '+=' + deltaX});
                $(dropped).css('position', 'absolute');
            }
        });
        $("#right").droppable({
            accept: ".draggable-icon",
            drop: function(event, ui) {
                // var dropped = ui.draggable.clone();
                // console.log(event);
                // $(dropped).appendTo("#right");
                // $(dropped).addClass("formation-icon");
                // var positionX = parseInt(event.pageX);
                // var positionY = parseInt(event.pageY);
                // var deltaX = positionX - formationX;
                // var deltaY = positionY - formationY;
                // $(dropped).css('position', 'absolute');
                // $(dropped).css({'top': '+=' + deltaY, 'left': '+=' + deltaX});
                // // set css location
                // console.log('formation location: ' + formationX + ' ' + formationY);
                // console.log('position of drop: ' + positionX + ' ' + positionY);
                // console.log('delta: ' +  deltaX + " " + deltaY);
            }
        });
        // implement draggable for icons in the formation window
    });

    $(".draggable-icon").on("dragstart", function(event, ui) {
        var dropped = ui.draggable.clone();
        var mouseX = parseInt(event.pageX);
        var mouseY = parseInt(event.pageY);
        var currentX = parseInt($(dropped).offset().left, 10);
        var currentY = parseInt($(dropped).offset().top, 10);
        var deltaX = mouseX - currentX;
        var deltaY = mouseY - currentY;
        $(dropped).css({'top': '+=' + deltaY, 'left': '+=' + deltaX});
        $(dropped).css('position', 'absolute');
    });

    </script>

  </head>
  <body>
    <div class="nav">
        <img src="images/logo.png" height="100%">
    </div>
    <div id="main">
        <div id="left">
            <img src="images/blue_triangle.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/orange_triangle.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/purple_triangle.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/green_triangle.png" class="draggable-icon"><br><br><br>
            <img src="images/blue_circle.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/orange_circle.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/purple_circle.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/green_circle.png" class="draggable-icon"><br><br><br>
            <img src="images/blue_square.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/orange_square.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/purple_square.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/green_square.png" class="draggable-icon"><br><br><br>
        </div>
        <div id="right">
            
        </div>
    </div>
    <div id="frames">
        
    </div>
  </body>
</html>
