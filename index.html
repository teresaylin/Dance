<!DOCTYPE html>
<html>
  <head>
    <title>Dance!</title>
    <link rel='stylesheet' href='css/style.css' />
    <link rel='stylesheet' href='css/jquery-ui.min.css' />
    <link rel="shortcut icon" href="favicon.ico"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src='js/jquery-ui.min.js'></script>
    <script src='js/slide.js'></script>
    <script src="js/playbar.js"></script>
    <script>

    var deltaX;
    var deltaY;

    $(function() {
        $(".draggable-icon").draggable({
            revert: "invalid",
            scroll: false,
            stack: ".draggable-icon",
            helper: "clone",
            appendTo: "#main",
            start: function(event, ui) {
                var dropped = this;
                console.log(this);
                var mouseX = parseInt(event.pageX);
                var mouseY = parseInt(event.pageY);
                var currentX = parseInt($(dropped).offset().left, 10);
                var currentY = parseInt($(dropped).offset().top, 10);
                deltaX = mouseX - currentX;
                deltaY = mouseY - currentY;
            }
        });
        $("#right-top").droppable({
            accept: ".draggable-icon",
            drop: function(event, ui) {
                var dropped = ui.draggable.clone();
                $(dropped).appendTo("#right");
                $(dropped).addClass("formation-icon");
                var positionX = parseInt(event.pageX);
                var positionY = parseInt(event.pageY);
                $(dropped).css('position', 'absolute');
                $(dropped).css({'top': positionY-deltaY, 'left': positionX-deltaX});
            }
        });
        // implement draggable for icons in the formation window
    });

    </script>

    <script> 

    $(document).ready(function()
    {
      var start = generateAddSlide();
      document.getElementById("frames").append(start);
    });

    $(document).on('click',"#newSlide", function(evt){
      var slide = generateSlideStub();
      var addSlide = generateAddSlide();

      var frames = document.getElementById("frames");
      var frameChildren = frames.childNodes;
      var size = frameChildren.length;

      frames.removeChild(frameChildren[size-1]);

      frames.appendChild(slide);
      frames.appendChild(addSlide);
    });

    </script>

  </head>
  <body>
    <div class="nav">
        <img src="images/logo.png" height="100%">
    </div>
    <div id="main">
        <div id="left">
            <img src="images/blue_triangle.png" id="blue" class="draggable-icon"><div class="spacing"></div>
            <img src="images/orange_triangle.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/purple_triangle.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/green_triangle.png" class="draggable-icon"><br><br><br>
            <img src="images/blue_circle.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/orange_circle.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/purple_circle.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/green_circle.png" class="draggable-icon"><br><br><br>
            <img src="images/blue_square.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/orange_square.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/purple_square.png" class="draggable-icon"><div class="spacing"></div>
            <img src="images/green_square.png" class="draggable-icon"><br><br><br>
        </div>
        <div id="right">
            <div id="right-top"></div>
            <div id="right-bot"></div>
        </div>
    </div>
    <div id="frames">
        
    </div>
  </body>
</html>
